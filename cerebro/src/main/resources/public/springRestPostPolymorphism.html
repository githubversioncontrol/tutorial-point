<div ng-controller="cerebroController"><div ng-if="breadCrumbs.length > 0">
<ol class="breadcrumb">
	<li ng-repeat="breadCrumb in breadCrumbs"><a ng-href="{{breadCrumb.link}}" ng-click="popBreadCrumb($index)">{{breadCrumb.name}}</a></li>
</ol>
<hr/>
</div></div>

<div class="panel panel-primary"><div class="panel-heading">Steps</div><div class="panel-body">
<ul>
	<li>Create web project using maven</li>
	<li>Add following dependencies in pom.xml
		<ul>
			<li>junit</li>
			<li>javaee-api</li>
			<li>spring-core</li>
			<li>spring-webmvc</li>
			<li>jackson-mapper-asl:1.9.13</li>
			<li>jackson-databind:2.5.0</li>
		</ul>
	</li>
	<li>Add org.springframework.web.servlet.DispatcherServlet to web.xml</li>
	<li>Create spring config file</li>
	<li>Create Rest Services with POST method</li>
	<li>Deploy into tomcat</li>
</ul>
</div></div>

<div class="panel panel-primary"><div class="panel-heading">Create web project using Maven from cmd</div><div class="panel-body">
<pre><code>
mvn archetype:generate -DgroupId=spring.rest.polymorphism -DartifactId=RequestBodyPolymorphism -Dversion=1.0 -DarchetypeArtifactId=maven-archetype-webapp -DinteractiveMode=false
</code></pre>
</div></div>

<div class="panel panel-primary"><div class="panel-heading">Project Structure</div><div class="panel-body">
<img class="img-responsive" ng-src="images/spring/1-spring-rest-polymorphism.jpg"/>
</div></div>

<div class="panel panel-primary"><div class="panel-heading">pom.xml</div><div class="panel-body">
<pre><code>
&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
	xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd&quot;&gt;
	&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
	&lt;groupId&gt;spring.rest.polymorphism&lt;/groupId&gt;
	&lt;artifactId&gt;RequestBodyPolymorphism&lt;/artifactId&gt;
	&lt;packaging&gt;war&lt;/packaging&gt;
	&lt;version&gt;1.0&lt;/version&gt;
	&lt;name&gt;RequestBodyPolymorphism Maven Webapp&lt;/name&gt;
	&lt;url&gt;http://maven.apache.org&lt;/url&gt;

	&lt;properties&gt;
		&lt;spring.version&gt;4.3.2.RELEASE&lt;/spring.version&gt;
	&lt;/properties&gt;

	&lt;dependencies&gt;
		&lt;dependency&gt;
			&lt;groupId&gt;junit&lt;/groupId&gt;
			&lt;artifactId&gt;junit&lt;/artifactId&gt;
			&lt;version&gt;4.12&lt;/version&gt;
			&lt;scope&gt;test&lt;/scope&gt;
		&lt;/dependency&gt;
		&lt;dependency&gt;
			&lt;groupId&gt;javax&lt;/groupId&gt;
			&lt;artifactId&gt;javaee-api&lt;/artifactId&gt;
			&lt;version&gt;7.0&lt;/version&gt;
		&lt;/dependency&gt;

		<em>&lt;!-- Spring dependencies --&gt;
		&lt;dependency&gt;
			&lt;groupId&gt;org.springframework&lt;/groupId&gt;
			&lt;artifactId&gt;spring-core&lt;/artifactId&gt;
			&lt;version&gt;${spring.version}&lt;/version&gt;
		&lt;/dependency&gt;
		&lt;dependency&gt;
			&lt;groupId&gt;org.springframework&lt;/groupId&gt;
			&lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;
			&lt;version&gt;${spring.version}&lt;/version&gt;
		&lt;/dependency&gt;
		&lt;dependency&gt;
			&lt;groupId&gt;org.codehaus.jackson&lt;/groupId&gt;
			&lt;artifactId&gt;jackson-mapper-asl&lt;/artifactId&gt;
			&lt;version&gt;1.9.13&lt;/version&gt;
		&lt;/dependency&gt;
		&lt;dependency&gt;
			&lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;
			&lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;
			&lt;version&gt;2.5.0&lt;/version&gt;
		&lt;/dependency&gt;</em>
	&lt;/dependencies&gt;
	&lt;build&gt;
		&lt;finalName&gt;RequestBodyPolymorphism&lt;/finalName&gt;
		&lt;plugins&gt;
			&lt;plugin&gt;
				&lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
				&lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;
				&lt;version&gt;3.5.1&lt;/version&gt;
				&lt;configuration&gt;
					&lt;source&gt;1.8&lt;/source&gt;
					&lt;target&gt;1.8&lt;/target&gt;
					&lt;meminitial&gt;128m&lt;/meminitial&gt;
					&lt;maxmem&gt;512m&lt;/maxmem&gt;
					&lt;showDeprecation&gt;true&lt;/showDeprecation&gt;
					&lt;showWarnings&gt;true&lt;/showWarnings&gt;
					&lt;encoding&gt;UTF-8&lt;/encoding&gt;
					&lt;verbose&gt;true&lt;/verbose&gt;
					&lt;compilerArgument&gt;-Xlint:all&lt;/compilerArgument&gt;
					&lt;compilerArgument&gt;-parameters&lt;/compilerArgument&gt;
				&lt;/configuration&gt;
			&lt;/plugin&gt;
		&lt;/plugins&gt;
	&lt;/build&gt;
&lt;/project&gt;
</code></pre>
</div></div>

<div class="panel panel-primary"><div class="panel-heading">web.xml</div><div class="panel-body">
<pre><code>
&lt;web-app xmlns=&quot;http://java.sun.com/xml/ns/javaee&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
	xsi:schemaLocation=&quot;http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd&quot;
	version=&quot;3.0&quot;&gt;

	&lt;display-name&gt;Archetype Created Web Application&lt;/display-name&gt;
	&lt;servlet&gt;
		&lt;servlet-name&gt;springREST&lt;/servlet-name&gt;
		&lt;servlet-class&gt;org.springframework.web.servlet.DispatcherServlet&lt;/servlet-class&gt;
		&lt;init-param&gt;
			&lt;param-name&gt;contextConfigLocation&lt;/param-name&gt;
			&lt;param-value&gt;/WEB-INF/springConfig.xml&lt;/param-value&gt;
		&lt;/init-param&gt;
	&lt;/servlet&gt;
	&lt;servlet-mapping&gt;
		&lt;servlet-name&gt;springREST&lt;/servlet-name&gt;
		&lt;url-pattern&gt;/&lt;/url-pattern&gt;
	&lt;/servlet-mapping&gt;
&lt;/web-app&gt;
</code></pre>
</div></div>

<div class="panel panel-primary"><div class="panel-heading">springConfig.xml</div><div class="panel-body">
<pre><code>
&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;
	xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
	xmlns:context=&quot;http://www.springframework.org/schema/context&quot;
	xmlns:mvc=&quot;http://www.springframework.org/schema/mvc&quot;
	xsi:schemaLocation=&quot;http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-4.3.xsd
		http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
		http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-4.3.xsd&quot;&gt;

&lt;context:component-scan base-package=&quot;com.request.body.polymorphism&quot;/&gt;
&lt;mvc:annotation-driven/&gt;

&lt;/beans&gt;
</code></pre>
</div></div>

<div class="panel panel-primary"><div class="panel-heading">Person.java</div><div class="panel-body">
<pre><code>
package com.request.body.model;

import com.fasterxml.jackson.annotation.JsonSubTypes;
import com.fasterxml.jackson.annotation.JsonTypeInfo;
import com.fasterxml.jackson.annotation.JsonTypeInfo.As;
import com.fasterxml.jackson.annotation.JsonTypeInfo.Id;

<em>@JsonTypeInfo(use = Id.NAME, include = As.PROPERTY, property = &quot;type&quot;)
@JsonSubTypes({ @JsonSubTypes.Type(value = Employee.class, name = &quot;employee&quot;),
		@JsonSubTypes.Type(value = Student.class, name = &quot;student&quot;) })</em>
public abstract class Person {

	private String firstName;
	private String lastName;
	private String objectType;

	public Person() {
	}

	public Person(String objectType) {
		this.objectType = objectType;
	}

	public String getFirstName() {
		return firstName;
	}

	public void setFirstName(String firstName) {
		this.firstName = firstName;
	}

	public String getLastName() {
		return lastName;
	}

	public void setLastName(String lastName) {
		this.lastName = lastName;
	}

	public String getObjectType() {
		return objectType;
	}

	public void setObjectType(String objectType) {
		this.objectType = objectType;
	}

	@Override
	public String toString() {
		return &quot;Person [firstName=&quot; + firstName + &quot;, lastName=&quot; + lastName + &quot;]&quot;;
	}
}
</code></pre>
</div></div>

<div class="panel panel-primary"><div class="panel-heading">Employee.java</div><div class="panel-body">
<pre><code>
package com.request.body.model;

public class Employee extends Person {

	private String designation;

	public Employee() {
		super(&quot;employee object&quot;);
	}

	public String getDesignation() {
		return designation;
	}

	public void setDesignation(String designation) {
		this.designation = designation;
	}

	@Override
	public String toString() {
		return &quot;Employee [designation=&quot; + designation + &quot;]&quot;;
	}
}
</code></pre>
</div></div>

<div class="panel panel-primary"><div class="panel-heading">Student.java</div><div class="panel-body">
<pre><code>
package com.request.body.model;

public class Student extends Person {

	private String course;

	public Student() {
		super(&quot;student object&quot;);
	}

	public String getCourse() {
		return course;
	}

	public void setCourse(String course) {
		this.course = course;
	}

	@Override
	public String toString() {
		return &quot;Student [course=&quot; + course + &quot;]&quot;;
	}
}
</code></pre>
</div></div>

<div class="panel panel-primary"><div class="panel-heading">PostController.java</div><div class="panel-body">
<pre><code>
package com.request.body.polymorphism;

import org.springframework.http.MediaType;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.RestController;

import com.request.body.model.Employee;
import com.request.body.model.Person;
import com.request.body.model.Student;

@RestController
public class PostController {

	@RequestMapping(value = &quot;/method1&quot;, method = RequestMethod.POST, produces = MediaType.APPLICATION_JSON_VALUE, consumes = MediaType.APPLICATION_JSON_VALUE)
	public Person method1(@RequestBody Person person) {
		if (person instanceof Employee) {
			Employee employee = (Employee) person;
			System.out.println(&quot;employee.getDesignation(): &quot; + employee.getDesignation());
		} else if (person instanceof Student) {
			Student student = (Student) person;
			System.out.println(&quot;student.getCourse(): &quot; + student.getCourse());
		}
		return person;
	}
}
</code></pre>
</div></div>

<div class="panel panel-primary"><div class="panel-heading">employee object json</div><div class="panel-body">
<ul>
	<li>Request Body
		<pre><code>
{
    &quot;firstName&quot;: &quot;Jack&quot;,
    &quot;lastName&quot;: &quot;Smith&quot;,
    &quot;designation&quot;: &quot;SSE&quot;,
    &quot;type&quot;: &quot;employee&quot;
}
		</code></pre>	
	</li>
	<li class="noBullet"><img class="img-responsive" ng-src="images/spring/2-spring-rest-polymorphism.jpg"/></li>
	<li>Response:
		<pre><code>
{
  &quot;type&quot;: &quot;employee&quot;,
  &quot;firstName&quot;: &quot;Jack&quot;,
  &quot;lastName&quot;: &quot;Smith&quot;,
  &quot;objectType&quot;: &quot;employee object&quot;,
  &quot;designation&quot;: &quot;SSE&quot;
}		
		</code></pre>
	</li>
</ul>
</div></div>

<div class="panel panel-primary"><div class="panel-heading">student object json</div><div class="panel-body">
<ul>
	<li>Request Body
		<pre><code>
{
    &quot;firstName&quot;: &quot;Jack&quot;,
    &quot;lastName&quot;: &quot;Smith&quot;,
    &quot;course&quot;: &quot;Java&quot;,
    &quot;type&quot;: &quot;student&quot;
}
		</code></pre>	
	</li>
	<li class="noBullet"><img class="img-responsive" ng-src="images/spring/3-spring-rest-polymorphism.jpg"/></li>
	<li>Response:
		<pre><code>
{
  &quot;type&quot;: &quot;student&quot;,
  &quot;firstName&quot;: &quot;Jack&quot;,
  &quot;lastName&quot;: &quot;Smith&quot;,
  &quot;objectType&quot;: &quot;student object&quot;,
  &quot;course&quot;: &quot;Java&quot;
}		
		</code></pre>
	</li>
</ul>
</div></div>